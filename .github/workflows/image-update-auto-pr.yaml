name: image-update-auto-pr
on:
  workflow_dispatch:
  push:
    branches: [images-update-etcd, images-update-minio]

jobs:
  pull-request:
    name: Open PR to main
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@08eba0b27e820071cde6df949e0beb9ba4906955 # v4
      name: checkout

    - uses: repo-sync/pull-request@7e79a9f5dc3ad0ce53138f01df2fad14a04831c5 # v2
      name: pull-request
      with:
        destination_branch: "main"
        pr_title: "Updating ${{ github.ref }} into main"
        pr_body: "Automated image update PR*"
        pr_reviewer: "brokenpip3"
        pr_label: "auto-image-update"
        pr_draft: false
        github_token: ${{ secrets.GITHUB_TOKEN }}
