---
apiVersion: monitoring.coreos.com/v1
kind: PodMonitor
metadata:
  name: postgres-exporter-ha
  namespace: monitoring
spec:
  namespaceSelector:
    any: true
  selector:
    matchExpressions:
      - key: application
        operator: In
        values:
          - spilo
      - key: spilo-role
        operator: In
        values:
          - master
  podMetricsEndpoints:
    - port: exporter
---
apiVersion: monitoring.coreos.com/v1
kind: PodMonitor
metadata:
  name: postgres-exporter-single-zulip
  namespace: monitoring
spec:
  namespaceSelector:
    matchNames:
      - zulip
  selector:
    matchExpressions:
      - key: app
        operator: In
        values:
          - zulip
      - key: component
        operator: In
        values:
          - postgres
  podMetricsEndpoints:
    - port: metrics
...
